---
name: clarify
description: |
  모호한 요구사항을 명확한 스펙으로 변환하는 스킬.
  다음 상황에서 사용:
  - "요구사항 정리해줘", "clarify", "/clarify"
  - "이게 무슨 뜻이야?", "명확하게 해줘"
  - "스펙 정리", "요구사항 명확화"
  - 모호하거나 불완전한 요청을 받았을 때
---

# Clarify

모호하거나 불완전한 요구사항을 **구조화된 질문**을 통해 명확하고 실행 가능한 스펙으로 변환합니다.

## Purpose

요구사항이 불명확하거나 여러 해석이 가능할 때, 구현을 시작하기 전에 사용자의 진정한 의도를 파악합니다.

## Protocol

### Phase 1: 원본 요구사항 캡처

사용자의 원래 요청을 **그대로** 기록하고 다음을 파악:
- 불명확한 점
- 가정이 필요한 부분
- 해석의 여지가 있는 부분

### Phase 2: 반복적 명확화

`AskUserQuestion` 도구를 사용하여 각 모호성을 해결합니다.

**질문 설계 원칙:**

| 원칙 | 설명 | 예시 |
|------|------|------|
| 구체적 | 일반적 질문 대신 구체적 질문 | "어떻게?"보다 "저장 위치가 로컬인가요, 클라우드인가요?" |
| 선택지 제시 | 개방형 질문 대신 2-4개 옵션 | AskUserQuestion의 options 활용 |
| 한 번에 하나 | 여러 질문을 묶지 않음 | 하나씩 순차적으로 |
| 중립적 표현 | 특정 답변으로 유도하지 않음 | 모든 옵션을 동등하게 제시 |

### Phase 3: Before/After 비교

명확화 완료 후 다음 형식으로 정리:

```markdown
## Requirement Clarification Summary

### Before (Original)
> [사용자의 원래 요청 그대로]

### After (Clarified)
**Goal**: [구체적 목표]
**Scope**: [포함/제외 범위]
**Constraints**: [제약 조건]
**Success Criteria**: [성공 기준]

### Decisions Made
| 항목 | 원래 | 결정 |
|------|------|------|
| ... | 불명확 | 구체적 결정 |
```

### Phase 4: 저장 옵션

명확화된 요구사항을 파일로 저장할지 확인:
- 기본 위치: `requirements/` 또는 프로젝트 루트
- 형식: Markdown (`.md`)
- 파일명: 내용 기반 자동 제안

## Ambiguity Categories

| 카테고리 | 질문 예시 |
|----------|-----------|
| **Scope** | 포함 범위는? 명시적으로 제외할 것은? |
| **Behavior** | 예외 케이스는? 에러 시나리오는? |
| **Interface** | 누가/무엇이 상호작용? 어떻게? |
| **Data** | 입력은? 출력은? 형식은? |
| **Constraints** | 성능 요구사항? 호환성? |
| **Priority** | 필수 vs 선택? 우선순위는? |

## Examples

### Example 1: 모호한 기능 요청

**Original**: "로그인 기능 추가해줘"

**질문 흐름**:
1. 인증 방식? → 이메일/비밀번호, OAuth, 둘 다
2. 회원가입도 포함? → 예/아니오
3. 세션 유지 기간? → 브라우저 종료까지, 24시간, 7일, 30일
4. 비밀번호 요구사항? → 기본(8자), 강화(특수문자 포함), 커스텀

**Clarified**:
```
Goal: 이메일/비밀번호 기반 인증 시스템 구현
Scope: 로그인 + 회원가입 + 비밀번호 재설정
Constraints: 세션 7일 유지, 비밀번호 8자 이상 + 특수문자
Success Criteria: 가입 → 로그인 → 세션 유지 플로우 완료
```

### Example 2: 모호한 버그 리포트

**Original**: "내보내기가 안 돼요"

**질문 흐름**:
1. 어떤 내보내기? → CSV, Excel, PDF
2. 어떤 증상? → 빈 파일, 에러 메시지, 아무 반응 없음
3. 언제부터? → 오늘, 최근 업데이트 후, 모름
4. 재현 가능? → 항상, 가끔, 특정 조건

**Clarified**:
```
Goal: CSV 내보내기 빈 파일 문제 해결
Scope: 대시보드 CSV 내보내기 기능
Constraints: 최근 업데이트 후 발생, 항상 재현됨
Success Criteria: CSV 내보내기 시 데이터가 포함된 파일 생성
```

## Rules

1. **No assumptions**: 가정하지 말고 질문하기
2. **Preserve intent**: 사용자 의도를 리다이렉트하지 말고 정제하기
3. **Minimal questions**: 필요한 것만 질문 (3-5개 권장)
4. **Respect answers**: 사용자 결정을 수용하고 재질문하지 않기
5. **Track changes**: 항상 before/after 비교 표시

## Tips

- 질문이 너무 많으면 사용자가 지침 → 핵심만 질문
- 기술적 용어보다 사용자 언어로 질문
- "혹시"보다 "어떤 것이"로 직접적으로 질문
- 컨텍스트에서 유추 가능한 것은 확인만 하고 넘어가기
